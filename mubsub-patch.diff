diff --git a/src/database/mongo.js b/src/database/mongo.js
index f16bd852a..94f9dfbdf 100644
--- a/src/database/mongo.js
+++ b/src/database/mongo.js
@@ -272,5 +272,6 @@ mongoModule.close = function (callback) {
 
 mongoModule.socketAdapter = function () {
 	var mongoAdapter = require('socket.io-adapter-mongo');
-	return mongoAdapter(getConnectionString());
+	var mubsub = require('mubsub-nbb');
+	return mongoAdapter({ client: mubsub(mongoModule.client) });
 };
diff --git a/src/database/mongo/pubsub.js b/src/database/mongo/pubsub.js
index 83ff67629..47116c24a 100644
--- a/src/database/mongo/pubsub.js
+++ b/src/database/mongo/pubsub.js
@@ -1,6 +1,6 @@
 'use strict';
 
-var mubsub = require('mubsub');
+var mubsub = require('mubsub-nbb');
 
 var db = require('../mongo');
 var client = mubsub(db.client);
